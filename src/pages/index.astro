---
import { getPokemons } from '../lib/controllers/pokemonController';
import Layout from '../layouts/Layout.astro';
import PokemonGrid from '../components/PokemonGrid.astro';

const pokemons = await getPokemons(0, 12);
---

<Layout title="Pokedex">
  <main class="m-auto px-4 md:px-8 lg:px-16">
    <section class="mt-24 md:mt-44 mb-10 flex justify-center items-center gap-8 flex-wrap w-full max-w-5xl mx-auto">
      <div class="p-6 bg-white shadow-lg rounded-lg w-full max-w-md text-center">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Buscar Pokémon</h2>
        <input 
          id="pokemonInput" 
          type="text" 
          placeholder="Nombre o ID del Pokémon" 
          class="w-full p-2 border rounded mt-4 text-center"
          hx-get="partials/search-pokemons" 
          hx-trigger="keyup delay:350ms" 
          hx-target="#pokemon-grid" 
          hx-swap
          hx-include="[name='pokemon']"
          name="pokemon"
        />
      </div>
    
      <div class="flex flex-col gap-6 w-full max-w-md">
        <!-- Adivina el Pokémon button -->
        <a href="/guesser" class="w-full">
          <button 
            class="w-full py-4 px-6 bg-gray-800 text-white text-xl font-semibold rounded-lg hover:bg-gray-700 transition-all duration-300">
            Adivina el pokémon
          </button>
        </a>
    
        <!-- Sorpréndeme button -->
        <button 
          hx-get="partials/random-pokemon" 
          hx-trigger="click" 
          hx-target="#pokemon-grid" 
          hx-swap
          class="w-full py-4 px-6 bg-blue-500 text-white text-xl font-semibold rounded-lg hover:bg-blue-400 transition-all duration-300">
          SORPRÉNDEME
        </button>    
      </div>
    </section>
    
    <section id="pokemon-grid" class="w-full h-full mx-auto px-4">
      <PokemonGrid {pokemons}/>
    </section>
  </main>
</Layout>


  